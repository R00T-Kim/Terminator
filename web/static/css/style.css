:root {
  --bg: #0f1117; --bg-elevated: #161922; --card: #1c1f2e; --card-hover: #242838;
  --accent: #3b82f6; --accent2: #6366f1; --accent-soft: rgba(99,102,241,0.12);
  --text: #e4e4eb; --text-dim: #7c7f94; --text-muted: #52556a; --border: #2a2d3e; --border-subtle: #222538;
  --critical: #ef4444; --high: #f97316; --medium: #eab308;
  --low: #22c55e; --info: #38bdf8; --up: #22c55e; --down: #ef4444;
  --go: #22c55e; --nogo: #ef4444; --cond: #eab308;
  --shadow: 0 1px 3px rgba(0,0,0,0.3), 0 1px 2px rgba(0,0,0,0.2);
  --shadow-lg: 0 4px 12px rgba(0,0,0,0.4), 0 2px 4px rgba(0,0,0,0.2);
  --radius: 12px; --radius-sm: 8px;
}
* { margin: 0; padding: 0; box-sizing: border-box; }
body { background: var(--bg); color: var(--text); font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 15px; line-height: 1.6; min-height: 100vh; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }

header { background: var(--bg-elevated); border-bottom: 1px solid var(--border); padding: 16px 28px; display: flex; align-items: center; justify-content: space-between; position: sticky; top: 0; z-index: 100; backdrop-filter: blur(12px); }
header h1 { font-size: 20px; font-weight: 700; letter-spacing: 1.5px; color: #fff; text-transform: uppercase; }
.header-accent { color: var(--accent); }
.header-meta { display: flex; align-items: center; gap: 20px; font-size: 13px; color: var(--text-dim); }
.ws-indicator { display: flex; align-items: center; gap: 6px; }
.ws-dot { width: 8px; height: 8px; border-radius: 50%; background: var(--down); transition: background 0.3s; }
.ws-dot.connected { background: var(--up); animation: pulse 2s infinite; }
@keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.4; } }

/* Tabs */
.tabs { display: flex; gap: 4px; border-bottom: 1px solid var(--border); padding: 0 24px; background: var(--bg-elevated); }
.tab-btn { background: none; border: none; color: var(--text-dim); font-family: inherit; font-size: 13px; font-weight: 500; letter-spacing: 0.5px; text-transform: uppercase; padding: 14px 20px; cursor: pointer; border-bottom: 2px solid transparent; margin-bottom: -1px; transition: color 0.2s, border-color 0.2s; }
.tab-btn:hover { color: var(--text); }
.tab-btn.active { color: #fff; border-bottom-color: var(--accent); }
.tab-panel { display: none; }
.tab-panel.active { display: block; }

.container { display: grid; grid-template-columns: 280px 1fr; gap: 20px; padding: 24px; max-width: 1600px; margin: 0 auto; }
.sidebar { grid-row: 1 / 3; }
.card { background: var(--card); border: 1px solid var(--border-subtle); border-radius: var(--radius); padding: 20px; overflow: hidden; box-shadow: var(--shadow); transition: box-shadow 0.2s; }
.card:hover { box-shadow: var(--shadow-lg); }
.card-title { font-size: 12px; font-weight: 600; letter-spacing: 1.2px; text-transform: uppercase; color: var(--text-dim); border-bottom: 1px solid var(--border-subtle); padding-bottom: 10px; margin-bottom: 14px; display: flex; align-items: center; justify-content: space-between; }
.badge { background: var(--accent-soft); color: var(--accent); font-size: 11px; font-weight: 600; padding: 3px 10px; border-radius: 20px; }

.stats-row { display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; margin-bottom: 20px; }
.stat-card { background: var(--card); border: 1px solid var(--border-subtle); border-radius: var(--radius); padding: 20px; text-align: center; box-shadow: var(--shadow); }
.stat-value { font-size: 36px; font-weight: 700; color: #fff; letter-spacing: -1px; }
.stat-label { font-size: 12px; font-weight: 500; color: var(--text-dim); letter-spacing: 1px; text-transform: uppercase; margin-top: 8px; }

.session-list { max-height: calc(100vh - 200px); overflow-y: auto; }
.session-item { padding: 12px 14px; border-bottom: 1px solid var(--border-subtle); cursor: pointer; transition: background 0.2s, transform 0.1s; border-radius: var(--radius-sm); margin-bottom: 4px; }
.session-item:hover { background: var(--accent-soft); }
.session-item.active { background: var(--accent-soft); border-left: 3px solid var(--accent); }
.session-sid { font-size: 12px; color: var(--text-dim); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; font-family: 'JetBrains Mono', monospace; }
.session-target { font-size: 14px; font-weight: 500; color: var(--text); margin-top: 4px; }
.status-badge { display: inline-block; padding: 3px 10px; border-radius: 20px; font-size: 11px; font-weight: 600; text-transform: uppercase; margin-top: 6px; letter-spacing: 0.3px; }
.status-badge.completed { background: rgba(34,197,94,0.12); color: var(--low); }
.status-badge.running { background: rgba(56,189,248,0.12); color: var(--info); }
.status-badge.failed { background: rgba(239,68,68,0.12); color: var(--critical); }
.status-badge.unknown { background: rgba(124,127,148,0.12); color: var(--text-dim); }

.main-area { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
.findings-bars { display: flex; flex-direction: column; gap: 8px; }
.sev-row { display: flex; align-items: center; gap: 10px; }
.sev-label { width: 60px; font-size: 11px; text-transform: uppercase; flex-shrink: 0; }
.sev-bar-bg { flex: 1; background: var(--bg); border-radius: 3px; height: 14px; overflow: hidden; }
.sev-bar { height: 100%; border-radius: 3px; transition: width 0.5s ease; min-width: 2px; }
.sev-count { width: 30px; text-align: right; font-size: 12px; color: #fff; flex-shrink: 0; }
.sev-bar.critical { background: var(--critical); } .sev-bar.high { background: var(--high); }
.sev-bar.medium { background: var(--medium); } .sev-bar.low { background: var(--low); }
.sev-bar.info { background: var(--info); }

.live-log-area { grid-column: 1 / 3; }
#log-output { background: var(--bg); border: 1px solid var(--border-subtle); border-radius: var(--radius-sm); padding: 16px; height: 300px; overflow-y: auto; font-family: 'JetBrains Mono', monospace; font-size: 12px; line-height: 1.7; white-space: pre-wrap; word-break: break-all; }
.log-line { color: #a8ff78; display: block; }
.log-line.err { color: #ff8080; }
.log-line.warn { color: #ffe080; }
.log-idle { color: var(--text-dim); font-style: italic; }

.health-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); gap: 10px; }
.health-item { display: flex; align-items: center; gap: 10px; padding: 12px; border: 1px solid var(--border-subtle); border-radius: var(--radius-sm); background: var(--bg); }
.health-dot { width: 10px; height: 10px; border-radius: 50%; flex-shrink: 0; }
.health-dot.up { background: var(--up); box-shadow: 0 0 6px rgba(34,197,94,0.4); } .health-dot.down { background: var(--down); box-shadow: 0 0 6px rgba(239,68,68,0.4); }
.health-name { font-size: 13px; font-weight: 500; color: var(--text-dim); }

#session-detail { display: none; }
#session-detail.visible { display: block; }
.detail-log { background: #0d0d1a; border: 1px solid var(--border); border-radius: 4px; padding: 10px; max-height: 300px; overflow-y: auto; font-size: 11px; line-height: 1.5; white-space: pre-wrap; word-break: break-all; color: #c8ffa8; }
.flags-list { display: flex; flex-direction: column; gap: 6px; }
.flag-item { background: #1a0d1a; border: 1px solid var(--critical); border-radius: 4px; padding: 6px 10px; font-size: 12px; color: #ff8080; word-break: break-all; }
.detail-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 12px; }
.info-table { width: 100%; border-collapse: collapse; font-size: 12px; }
.info-table td { padding: 3px 6px 3px 0; vertical-align: top; }
.info-table td:first-child { color: var(--text-dim); white-space: nowrap; }

/* ── Bug Bounty Missions ── */
.bounty-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 24px; }
.mission-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 18px; }
.mission-card { background: var(--card); border: 1px solid var(--border-subtle); border-radius: var(--radius); padding: 20px; cursor: pointer; transition: all 0.25s ease; box-shadow: var(--shadow); }
.mission-card:hover { border-color: var(--accent); background: var(--card-hover); box-shadow: var(--shadow-lg); transform: translateY(-2px); }
.mission-card.active { border-color: var(--accent); background: var(--card-hover); box-shadow: 0 0 0 1px var(--accent), var(--shadow-lg); }
.mission-name { font-size: 18px; color: #fff; font-weight: 600; margin-bottom: 10px; letter-spacing: -0.2px; }
.mission-meta { display: flex; align-items: center; gap: 10px; flex-wrap: wrap; margin-bottom: 12px; }
.go-badge { display: inline-block; padding: 4px 12px; border-radius: 20px; font-size: 11px; text-transform: uppercase; font-weight: 600; letter-spacing: 0.3px; }
.go-badge.GO { background: rgba(34,197,94,0.15); color: var(--go); }
.go-badge.NO_GO { background: rgba(239,68,68,0.15); color: var(--nogo); }
.go-badge.CONDITIONAL_GO { background: rgba(234,179,8,0.15); color: var(--cond); }
.go-badge.UNKNOWN { background: rgba(124,127,148,0.12); color: var(--text-dim); }
.score-badge { font-size: 13px; font-weight: 500; color: var(--text-dim); }
.findings-badge { font-size: 13px; font-weight: 500; color: var(--info); }

/* Pipeline progress bar */
.pipeline-bar { display: flex; gap: 4px; margin-top: 12px; }
.phase-dot { flex: 1; height: 8px; border-radius: 4px; background: var(--border); transition: background 0.3s, box-shadow 0.3s; }
.phase-dot.done { background: var(--low); box-shadow: 0 0 6px rgba(34,197,94,0.3); }
.phase-dot.current { background: var(--accent); box-shadow: 0 0 8px rgba(59,130,246,0.4); animation: pulse-phase 2s infinite; }
@keyframes pulse-phase { 0%, 100% { opacity: 1; } 50% { opacity: 0.6; } }
.pipeline-label { font-size: 12px; font-weight: 500; color: var(--text-dim); margin-top: 8px; }

/* Mission detail panel */
#mission-detail { display: none; grid-column: 1 / -1; }
#mission-detail.visible { display: block; }
.pipeline-timeline { display: flex; flex-direction: column; gap: 6px; }
.phase-row { display: flex; align-items: center; gap: 14px; padding: 12px 16px; border-radius: var(--radius-sm); background: var(--bg); border: 1px solid var(--border-subtle); transition: background 0.2s; }
.phase-row:hover { background: var(--bg-elevated); }
.phase-icon { width: 24px; height: 24px; border-radius: 50%; flex-shrink: 0; display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: 600; }
.phase-icon.done { background: rgba(34,197,94,0.2); color: var(--low); }
.phase-icon.pending { background: var(--border); color: var(--text-muted); }
.phase-label { font-size: 14px; font-weight: 500; color: var(--text); }
.phase-artifact { font-size: 12px; color: var(--text-dim); margin-left: auto; font-family: 'JetBrains Mono', monospace; }

.mission-tabs { display: flex; gap: 4px; border-bottom: 1px solid var(--border); margin-bottom: 16px; }
.mission-tab { background: none; border: none; color: var(--text-dim); font-family: inherit; font-size: 12px; font-weight: 500; letter-spacing: 0.5px; text-transform: uppercase; padding: 10px 16px; cursor: pointer; border-bottom: 2px solid transparent; margin-bottom: -1px; transition: color 0.2s; }
.mission-tab:hover { color: var(--text); }
.mission-tab.active { color: #fff; border-bottom-color: var(--accent); }
.mission-tab-panel { display: none; }
.mission-tab-panel.active { display: block; }

.md-preview { background: var(--bg); border: 1px solid var(--border-subtle); border-radius: var(--radius-sm); padding: 24px; max-height: 700px; overflow-y: auto; font-family: 'Inter', sans-serif; font-size: 14px; line-height: 1.8; color: var(--text); }
.md-preview h1 { font-size: 22px; font-weight: 700; color: #fff; margin: 24px 0 12px 0; padding-bottom: 8px; border-bottom: 1px solid var(--border-subtle); }
.md-preview h2 { font-size: 18px; font-weight: 600; color: #fff; margin: 20px 0 10px 0; padding-bottom: 6px; border-bottom: 1px solid var(--border-subtle); }
.md-preview h3 { font-size: 16px; font-weight: 600; color: var(--text); margin: 16px 0 8px 0; }
.md-preview h4 { font-size: 14px; font-weight: 600; color: var(--text-dim); margin: 12px 0 6px 0; }
.md-preview p { margin: 8px 0; }
.md-preview code { background: rgba(99,102,241,0.1); color: var(--accent); padding: 2px 6px; border-radius: 4px; font-family: 'JetBrains Mono', monospace; font-size: 13px; }
.md-preview pre { background: #0a0b10; border: 1px solid var(--border-subtle); border-radius: var(--radius-sm); padding: 16px; margin: 12px 0; overflow-x: auto; }
.md-preview pre code { background: none; color: #a8ff78; padding: 0; font-size: 12px; line-height: 1.6; }
.md-preview table { width: 100%; border-collapse: collapse; margin: 12px 0; font-size: 13px; }
.md-preview th { background: var(--bg-elevated); color: var(--text); font-weight: 600; text-align: left; padding: 10px 12px; border: 1px solid var(--border); }
.md-preview td { padding: 8px 12px; border: 1px solid var(--border-subtle); }
.md-preview tr:hover { background: var(--accent-soft); }
.md-preview blockquote { border-left: 3px solid var(--accent); padding: 8px 16px; margin: 12px 0; background: var(--accent-soft); border-radius: 0 var(--radius-sm) var(--radius-sm) 0; color: var(--text-dim); }
.md-preview ul, .md-preview ol { padding-left: 24px; margin: 8px 0; }
.md-preview li { margin: 4px 0; }
.md-preview hr { border: none; border-top: 1px solid var(--border); margin: 20px 0; }
.md-preview strong { color: #fff; font-weight: 600; }
.md-preview a { color: var(--accent); text-decoration: none; }
.md-preview a:hover { text-decoration: underline; }
.md-preview img { max-width: 100%; border-radius: var(--radius-sm); }
.report-draft { margin-bottom: 16px; }
.report-draft-name { font-size: 12px; font-weight: 600; color: var(--text-dim); margin-bottom: 8px; font-family: 'JetBrains Mono', monospace; }

::-webkit-scrollbar { width: 6px; } ::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
::-webkit-scrollbar-thumb:hover { background: var(--text-muted); }

@media (max-width: 900px) {
  .container { grid-template-columns: 1fr; } .sidebar { grid-row: auto; }
  .main-area { grid-template-columns: 1fr; } .live-log-area { grid-column: auto; }
  .stats-row { grid-template-columns: repeat(2, 1fr); }
  .mission-grid { grid-template-columns: 1fr; }
}

.refresh-btn { background: var(--accent-soft); border: 1px solid var(--border); color: var(--accent); padding: 6px 14px; border-radius: var(--radius-sm); cursor: pointer; font-family: inherit; font-size: 12px; font-weight: 500; transition: all 0.2s; }
.refresh-btn:hover { background: var(--accent); color: #fff; border-color: var(--accent); }
.empty-msg { color: var(--text-dim); text-align: center; padding: 20px; font-size: 12px; }
.mt8 { margin-top: 8px; }
.full-width { grid-column: 1 / -1; }
